########################################
#
# lib-widget-extra Makefile
#
# Dominic Mazzoni, Richard Ash
#
# Run configure to generate Makefile
# from Makefile.in
#

CC = @CC@
CXX = @CXX@

LIBS = @LIBS@

srcdir=@srcdir@
top_srcdir=@top_srcdir@
top_builddir=@top_builddir@
prefix=@prefix@
exec_prefix=@exec_prefix@

# CFLAGS are specific to C.
override CFLAGS += @CFLAGS@

# CXXFLAGS are specific to C++.
override CXXFLAGS += @CXXFLAGS@

# CPPFLAGS are for both C and C++.
override CPPFLAGS += -fno-strict-aliasing @CPPFLAGS@ 

# LDFLAGS are for linking
override LDFLAGS += @LDFLAGS@

########################################
# ALL OBJECT FILES

OBJS = NonGuiThread.o

########################################
# DEPENDENCIES

SOURCES = $(OBJS:%.o=%.cpp)

########################################

all: libwidgetextra.a 

libwidgetextra.a: $(OBJS)
	ar rcs $@ $(OBJS)

#
# You can optionally "make dep" to make dependencies.
# The sed script turns "Foo.o: bar/Foo.cpp" into "bar/Foo.o: bar/Foo.cpp".
#

dep:
	$(CXX) -MM $(CXXFLAGS) $(CPPFLAGS) $(SOURCES) | \
		sed -e 's/^.*\.o: \([^ ]*\)\.cpp/\1.o: \1.cpp/' \
		> .depend

clean:
	rm -rf $(OBJS)
	rm -f libwidgetextra.a

#
# Rule for compiling C++ files
#

$(OBJS): %.o: $(srcdir)/%.cpp
	$(CXX) -c $(CXXFLAGS) $(CPPFLAGS) $< -o $@

#
# Include ".depend" if it exists (run "make dep" to generate it)
#

ifeq (.depend,$(wildcard .depend))
include .depend
endif

