<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Audacity: AudioIO.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.4 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="nav">
<a class="el" href="dir_d12fcf5cb2915e2c4965b3f8146e1fcb.html">src</a></div>
<h1>AudioIO.h</h1><a href="AudioIO_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/**********************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"></span>
<a name="l00003"></a>00003 <span class="comment">  Audacity: A Digital Audio Editor</span>
<a name="l00004"></a>00004 <span class="comment"></span>
<a name="l00005"></a>00005 <span class="comment">  AudioIO.h</span>
<a name="l00006"></a>00006 <span class="comment"></span>
<a name="l00007"></a>00007 <span class="comment">  Dominic Mazzoni</span>
<a name="l00008"></a>00008 <span class="comment"></span>
<a name="l00009"></a>00009 <span class="comment">  Use the PortAudio library to play and record sound</span>
<a name="l00010"></a>00010 <span class="comment"></span>
<a name="l00011"></a>00011 <span class="comment">**********************************************************************/</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="preprocessor">#ifndef __AUDACITY_AUDIO_IO__</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span><span class="preprocessor">#define __AUDACITY_AUDIO_IO__</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span>
<a name="l00016"></a>00016 <span class="preprocessor">#include "portaudio.h"</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include "<a class="code" href="Audacity_8h.html">Audacity.h</a>"</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="preprocessor">#ifdef USE_MIDI</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="comment">//#include "portmidi.h"</span>
<a name="l00021"></a>00021 <span class="comment">//#include "porttime.h"</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include "allegro.h"</span>
<a name="l00023"></a>00023 <span class="preprocessor">#endif // USE_MIDI</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span>
<a name="l00025"></a>00025 <span class="preprocessor">#if USE_PORTMIXER</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span><span class="preprocessor">#include "portmixer.h"</span>
<a name="l00027"></a>00027 <span class="preprocessor">#endif</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;wx/string.h&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;wx/thread.h&gt;</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="preprocessor">#include "<a class="code" href="WaveTrack_8h.html">WaveTrack.h</a>"</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include "<a class="code" href="SampleFormat_8h.html">SampleFormat.h</a>"</span>
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="keyword">class </span><a class="code" href="classAudioIO.html" title="AudioIO uses the PortAudio library to play and record sound.">AudioIO</a>;
<a name="l00036"></a>00036 <span class="keyword">class </span><a class="code" href="classRingBuffer.html" title="Holds streamed audio samples.">RingBuffer</a>;
<a name="l00037"></a>00037 <span class="keyword">class </span><a class="code" href="classMixer.html" title="Functions for doing the mixdown of the tracks.">Mixer</a>;
<a name="l00038"></a>00038 <span class="keyword">class </span><a class="code" href="classResample.html" title="Combined interface to libresample and libsamplerate.">Resample</a>;
<a name="l00039"></a>00039 <span class="keyword">class </span><a class="code" href="classTimeTrack.html" title="A kind of Track used to &amp;#39;warp time&amp;#39;.">TimeTrack</a>;
<a name="l00040"></a>00040 <span class="keyword">class </span><a class="code" href="classAudioThread.html" title="Defined different on Mac and other platforms (on Mac it does not use wxWidgets wxThread)...">AudioThread</a>;
<a name="l00041"></a>00041 <span class="keyword">class </span><a class="code" href="classMeter.html" title="VU Meter, for displaying recording/playback level.">Meter</a>;
<a name="l00042"></a>00042 <span class="keyword">class </span><a class="code" href="classTimeTrack.html" title="A kind of Track used to &amp;#39;warp time&amp;#39;.">TimeTrack</a>;
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="keyword">extern</span> <a class="code" href="classAudioIO.html" title="AudioIO uses the PortAudio library to play and record sound.">AudioIO</a> *<a class="code" href="AudioIO_8cpp.html#142d4fde5f1429059adcac9ea1f63425">gAudioIO</a>;
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="keywordtype">void</span> <a class="code" href="AudioIO_8cpp.html#5c082d9ef3612f42a4a78edffdf2a0db">InitAudioIO</a>();
<a name="l00047"></a>00047 <span class="keywordtype">void</span> <a class="code" href="AudioIO_8cpp.html#362633315924afe19ab0fe0cf4bd32da">DeinitAudioIO</a>();
<a name="l00048"></a>00048 wxString <a class="code" href="AudioIO_8cpp.html#289724ea943616e20d183ab0e6481bf7">DeviceName</a>(<span class="keyword">const</span> PaDeviceInfo* info);
<a name="l00049"></a>00049 
<a name="l00050"></a><a class="code" href="classAudioIOListener.html">00050</a> <span class="keyword">class </span>AUDACITY_DLL_API <a class="code" href="classAudioIOListener.html">AudioIOListener</a> {
<a name="l00051"></a>00051 <span class="keyword">public</span>:
<a name="l00052"></a><a class="code" href="classAudioIOListener.html#bd124e6ac835f2ddb8dbc036e469185b">00052</a>    <a class="code" href="classAudioIOListener.html">AudioIOListener</a>() {}
<a name="l00053"></a><a class="code" href="classAudioIOListener.html#d33d9783bd3ad9236615199759e244fb">00053</a>    <span class="keyword">virtual</span> ~<a class="code" href="classAudioIOListener.html">AudioIOListener</a>() {}
<a name="l00054"></a>00054    
<a name="l00055"></a>00055    <span class="keyword">virtual</span> <span class="keywordtype">void</span> OnAudioIORate(<span class="keywordtype">int</span> rate) = 0;
<a name="l00056"></a>00056    <span class="keyword">virtual</span> <span class="keywordtype">void</span> OnAudioIOStartRecording() = 0;
<a name="l00057"></a>00057    <span class="keyword">virtual</span> <span class="keywordtype">void</span> OnAudioIOStopRecording() = 0;
<a name="l00058"></a>00058    <span class="keyword">virtual</span> <span class="keywordtype">void</span> OnAudioIONewBlockFiles(<span class="keyword">const</span> wxString&amp; blockFileLog) = 0;
<a name="l00059"></a>00059 };
<a name="l00060"></a>00060 
<a name="l00061"></a><a class="code" href="AudioIO_8h.html#255835246ff122feb234d863682ddc2e">00061</a> <span class="preprocessor">#define MAX_MIDI_BUFFER_SIZE 5000</span>
<a name="l00062"></a><a class="code" href="classAudioIO.html">00062</a> <span class="preprocessor"></span><span class="keyword">class </span><a class="code" href="classAudioIO.html" title="AudioIO uses the PortAudio library to play and record sound.">AudioIO</a> {
<a name="l00063"></a>00063 
<a name="l00064"></a>00064  <span class="keyword">public</span>:
<a name="l00065"></a>00065    <a class="code" href="classAudioIO.html#68c6824c106711b4768dd3847a233366">AudioIO</a>();
<a name="l00066"></a>00066    <a class="code" href="classAudioIO.html#747b3a9f103ce40e9b8d5e8dfb1cfce2">~AudioIO</a>();
<a name="l00067"></a>00067    
<a name="l00075"></a>00075    <span class="keywordtype">void</span> <a class="code" href="classAudioIO.html#447c4b556a0f66a61ead1c97ed4ae7e7" title="Start up Portaudio for capture and recording as needed for input monitoring and software...">StartMonitoring</a>(<span class="keywordtype">double</span> sampleRate);
<a name="l00076"></a>00076 
<a name="l00084"></a>00084    <span class="keywordtype">int</span> <a class="code" href="classAudioIO.html#df4a9991ac5789ded7d79c8de4ffa568" title="Start recording or playing back audio.">StartStream</a>(WaveTrackArray playbackTracks, WaveTrackArray captureTracks,
<a name="l00085"></a>00085 <span class="comment">/* REQUIRES PORTMIDI */</span>
<a name="l00086"></a>00086                    <span class="comment">//NoteTrackArray midiTracks,</span>
<a name="l00087"></a>00087                    <a class="code" href="classTimeTrack.html" title="A kind of Track used to &amp;#39;warp time&amp;#39;.">TimeTrack</a> *timeTrack, <span class="keywordtype">double</span> sampleRate,
<a name="l00088"></a>00088                    <span class="keywordtype">double</span> t0, <span class="keywordtype">double</span> t1,
<a name="l00089"></a>00089                    <a class="code" href="classAudioIOListener.html">AudioIOListener</a>* listener,
<a name="l00090"></a>00090                    <span class="keywordtype">bool</span> playLooped = <span class="keyword">false</span>,
<a name="l00091"></a>00091                    <span class="keywordtype">double</span> cutPreviewGapStart = 0.0,
<a name="l00092"></a>00092                    <span class="keywordtype">double</span> cutPreviewGapLen = 0.0);
<a name="l00093"></a>00093 
<a name="l00099"></a>00099    <span class="keywordtype">void</span> <a class="code" href="classAudioIO.html#018ef510a8616f1feeb0f542f82b1d44" title="Stop recording, playback or input monitoring.">StopStream</a>();
<a name="l00102"></a><a class="code" href="classAudioIO.html#40488ff8506e6238963049844728a6c6">00102</a>    <span class="keywordtype">void</span> <a class="code" href="classAudioIO.html#40488ff8506e6238963049844728a6c6" title="Move the playback / recording position of the current stream by the specified amount...">SeekStream</a>(<span class="keywordtype">double</span> seconds) { <a class="code" href="classAudioIO.html#ff6b26b419fcb778d39873cd70334463">mSeek</a> = seconds; };
<a name="l00103"></a>00103    
<a name="l00108"></a>00108    <span class="keywordtype">bool</span> <a class="code" href="classAudioIO.html#10f4e839ded338c433a4cd46a6ba41b1" title="Returns true if audio i/o is busy starting, stopping, playing, or recording.">IsBusy</a>();
<a name="l00109"></a>00109 
<a name="l00116"></a>00116    <span class="keywordtype">bool</span> <a class="code" href="classAudioIO.html#07490d6ae881910c5ea13cdf011835f3" title="Returns true if the audio i/o is running at all, but not during cleanup.">IsStreamActive</a>();
<a name="l00117"></a>00117    <span class="keywordtype">bool</span> <a class="code" href="classAudioIO.html#07490d6ae881910c5ea13cdf011835f3" title="Returns true if the audio i/o is running at all, but not during cleanup.">IsStreamActive</a>(<span class="keywordtype">int</span> token);
<a name="l00118"></a>00118 
<a name="l00124"></a>00124    <span class="keywordtype">bool</span> <a class="code" href="classAudioIO.html#e38ba2eafdaf5a1579366d788fd669d9" title="Returns true if the stream is active, or even if audio I/O is busy cleaning up its...">IsAudioTokenActive</a>(<span class="keywordtype">int</span> token);
<a name="l00125"></a>00125 
<a name="l00128"></a>00128    <span class="keywordtype">bool</span> <a class="code" href="classAudioIO.html#81838290ddb586dc13726abf901b8260" title="Returns true if we&amp;#39;re monitoring input (but not recording or playing actual audio)...">IsMonitoring</a>();
<a name="l00129"></a>00129 
<a name="l00131"></a>00131    <span class="keywordtype">void</span> <a class="code" href="classAudioIO.html#49f8574c7ce8410e3ab254fe95c44388" title="Pause and un-pause playback and recording.">SetPaused</a>(<span class="keywordtype">bool</span> state);
<a name="l00133"></a>00133    <span class="keywordtype">bool</span> <a class="code" href="classAudioIO.html#a83356a7bb2153f67f4c82b72ed5185b" title="Find out if playback / recording is currently paused.">IsPaused</a>();
<a name="l00134"></a>00134 
<a name="l00135"></a>00135    <span class="comment">/* Mixer services are always available.  If no stream is running, these</span>
<a name="l00136"></a>00136 <span class="comment">    * methods use whatever device is specified by the preferences.  If a</span>
<a name="l00137"></a>00137 <span class="comment">    * stream *is* running, naturally they manipulate the mixer associated</span>
<a name="l00138"></a>00138 <span class="comment">    * with that stream.  If no mixer is available, they are emulated</span>
<a name="l00139"></a>00139 <span class="comment">    * (a gain is applied to input and output samples).</span>
<a name="l00140"></a>00140 <span class="comment">    */</span>
<a name="l00141"></a>00141    <span class="keywordtype">void</span> <a class="code" href="classAudioIO.html#6e08d80f05a4106be20dfaa96723c957">SetMixer</a>(<span class="keywordtype">int</span> inputSource, <span class="keywordtype">float</span> inputVolume,
<a name="l00142"></a>00142                  <span class="keywordtype">float</span> playbackVolume);
<a name="l00143"></a>00143    <span class="keywordtype">void</span> <a class="code" href="classAudioIO.html#2341f380ecf5d7630ed1879a1b66e28c">GetMixer</a>(<span class="keywordtype">int</span> *inputSource, <span class="keywordtype">float</span> *inputVolume,
<a name="l00144"></a>00144                  <span class="keywordtype">float</span> *playbackVolume);
<a name="l00149"></a>00149    wxArrayString <a class="code" href="classAudioIO.html#871ad77e029d77ff4ae461b2be5325cd" title="Get the list of inputs to the current mixer device.">GetInputSourceNames</a>();
<a name="l00150"></a>00150 
<a name="l00159"></a>00159    <span class="keywordtype">void</span> <a class="code" href="classAudioIO.html#ef42a8e615a55e2b914a989e8b63af0b">HandleDeviceChange</a>();
<a name="l00160"></a>00160 
<a name="l00163"></a>00163    <span class="keywordtype">void</span> <a class="code" href="classAudioIO.html#a8fee37047152c73fd050961930836c8" title="Set the current VU meters - this should be done once after each call to StartStream...">SetMeters</a>(<a class="code" href="classMeter.html" title="VU Meter, for displaying recording/playback level.">Meter</a> *inputMeter, <a class="code" href="classMeter.html" title="VU Meter, for displaying recording/playback level.">Meter</a> *outputMeter);
<a name="l00164"></a>00164    
<a name="l00177"></a>00177    <span class="keyword">static</span> wxArrayLong <a class="code" href="classAudioIO.html#8d5c6376948069792d356c4d465f65af" title="Get a list of sample rates the output (playback) device supports.">GetSupportedPlaybackRates</a>(<span class="keywordtype">int</span> DevIndex = -1,
<a name="l00178"></a>00178                                                 <span class="keywordtype">double</span> rate = 0.0);
<a name="l00179"></a>00179 
<a name="l00192"></a>00192    <span class="keyword">static</span> wxArrayLong <a class="code" href="classAudioIO.html#5a038799b288476cf6896129739c0ce5" title="Get a list of sample rates the input (recording) device supports.">GetSupportedCaptureRates</a>(<span class="keywordtype">int</span> devIndex = -1,
<a name="l00193"></a>00193                                                <span class="keywordtype">double</span> rate = 0.0);
<a name="l00194"></a>00194 
<a name="l00209"></a>00209    <span class="keyword">static</span> wxArrayLong <a class="code" href="classAudioIO.html#cb6e16f4da1d263491071ce5b26a9abd" title="Get a list of sample rates the current input/output device combination supports.">GetSupportedSampleRates</a>(<span class="keywordtype">int</span> playDevice = -1,
<a name="l00210"></a>00210                                               <span class="keywordtype">int</span> recDevice = -1,
<a name="l00211"></a>00211                                               <span class="keywordtype">double</span> rate = 0.0);
<a name="l00212"></a>00212 
<a name="l00221"></a>00221    <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classAudioIO.html#71facd3c7274394b70eaff652e1bc97e" title="Get a supported sample rate which can be used a an optimal default.">GetOptimalSupportedSampleRate</a>();
<a name="l00222"></a>00222 
<a name="l00230"></a>00230    <span class="keywordtype">double</span> <a class="code" href="classAudioIO.html#daf7977e341e8012b03dca8c733f24e1" title="The time the stream has been playing for.">GetStreamTime</a>();
<a name="l00231"></a>00231 
<a name="l00232"></a><a class="code" href="classAudioIO.html#5735d00a230e2a59a9702dfbf1a8b85d">00232</a>    <a class="code" href="SampleFormat_8h.html#9938d2e2f6adef23e745cd80ef379792">sampleFormat</a> <a class="code" href="classAudioIO.html#5735d00a230e2a59a9702dfbf1a8b85d">GetCaptureFormat</a>() { <span class="keywordflow">return</span> <a class="code" href="classAudioIO.html#3ced3771559e0231c0dc521d4770922d">mCaptureFormat</a>; }
<a name="l00233"></a><a class="code" href="classAudioIO.html#841f37644672ecb5ea445bfb52907c1f">00233</a>    <span class="keywordtype">int</span> <a class="code" href="classAudioIO.html#841f37644672ecb5ea445bfb52907c1f">GetNumCaptureChannels</a>() { <span class="keywordflow">return</span> <a class="code" href="classAudioIO.html#d8431949843083dcc6f069eebdcc2278">mNumCaptureChannels</a>; }
<a name="l00234"></a>00234 
<a name="l00239"></a><a class="code" href="classAudioIO.html#42f4cf4090548388aa1c762bb59778ba">00239</a>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classAudioIO.html#42f4cf4090548388aa1c762bb59778ba" title="Array of common audio sample rates.">StandardRates</a>[];
<a name="l00241"></a><a class="code" href="classAudioIO.html#4d794f0244d6be2f833a6627cbfcdae8">00241</a>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classAudioIO.html#4d794f0244d6be2f833a6627cbfcdae8" title="How many standard sample rates there are.">NumStandardRates</a>;
<a name="l00242"></a>00242 
<a name="l00246"></a>00246    wxString <a class="code" href="classAudioIO.html#134b6a56921f9c6bd197d80de4ddce48" title="Get diagnostic information on all the available audio I/O devices.">GetDeviceInfo</a>();
<a name="l00247"></a>00247 
<a name="l00248"></a>00248 <span class="keyword">private</span>:
<a name="l00259"></a>00259    <span class="keywordtype">double</span> <a class="code" href="classAudioIO.html#6489917b96acd5c4868b42724f1245a3" title="Return a valid sample rate that is supported by the current I/O device(s).">GetBestRate</a>(<span class="keywordtype">bool</span> capturing, <span class="keywordtype">bool</span> playing, <span class="keywordtype">double</span> sampleRate);
<a name="l00260"></a>00260 
<a name="l00271"></a>00271    <span class="keywordtype">bool</span> <a class="code" href="classAudioIO.html#65037b9e93a038d12a766558b5df0f19" title="Opens the portaudio stream(s) used to do playback or recording (or both) through...">StartPortAudioStream</a>(<span class="keywordtype">double</span> sampleRate,
<a name="l00272"></a>00272                              <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numPlaybackChannels,
<a name="l00273"></a>00273                              <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numCaptureChannels,
<a name="l00274"></a>00274                              <a class="code" href="SampleFormat_8h.html#9938d2e2f6adef23e745cd80ef379792">sampleFormat</a> captureFormat);
<a name="l00275"></a>00275 
<a name="l00276"></a>00276 <span class="comment">/* REQUIRES PORTMIDI */</span>
<a name="l00277"></a>00277 <span class="comment">//   bool StartPortMidiStream();</span>
<a name="l00278"></a>00278 
<a name="l00279"></a>00279    <span class="keywordtype">void</span> <a class="code" href="classAudioIO.html#cf033159cb82dbe6e4f69e298e157d8e">FillBuffers</a>();
<a name="l00280"></a>00280 
<a name="l00281"></a>00281 <span class="comment">/* REQUIRES PORTMIDI */</span>
<a name="l00282"></a>00282 <span class="comment">//   void  FillMidiBuffers();</span>
<a name="l00283"></a>00283 
<a name="l00289"></a>00289    <span class="keywordtype">int</span> <a class="code" href="classAudioIO.html#399032af1122a89dee20a48b743e656e" title="Get the number of audio samples free in all of the playback buffers.">GetCommonlyAvailPlayback</a>();
<a name="l00290"></a>00290 
<a name="l00297"></a>00297    <span class="keywordtype">int</span> <a class="code" href="classAudioIO.html#6d38408f6ebbb2fe5beaef55398c2ca3" title="Get the number of audio samples ready in all of the recording buffers.">GetCommonlyAvailCapture</a>();
<a name="l00298"></a>00298 
<a name="l00306"></a>00306    <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classAudioIO.html#f3b9a43db5c1987f5aa9c17409e5b99a" title="get the index of the supplied (named) recording device, or the device selected in...">getRecordDevIndex</a>(wxString devName = wxT(<span class="stringliteral">""</span>));
<a name="l00307"></a>00307 
<a name="l00315"></a>00315    <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classAudioIO.html#e4eef577027ac9d7c9b9edc568a4ba44" title="get the index of the supplied (named) playback device, or the device selected in...">getPlayDevIndex</a>(wxString devName = wxT(<span class="stringliteral">""</span>));
<a name="l00316"></a>00316 
<a name="l00321"></a><a class="code" href="classAudioIO.html#7a6449b2517e01d9d71a7cd69a11f851">00321</a>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classAudioIO.html#7a6449b2517e01d9d71a7cd69a11f851" title="Array of audio sample rates to try to use.">RatesToTry</a>[];
<a name="l00323"></a><a class="code" href="classAudioIO.html#cd857695ae99aee7817a5d3db4c271c7">00323</a>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classAudioIO.html#cd857695ae99aee7817a5d3db4c271c7" title="How many sample rates to try.">NumRatesToTry</a>;
<a name="l00324"></a>00324 
<a name="l00325"></a>00325    <span class="keywordtype">double</span> <a class="code" href="classAudioIO.html#20c0b00cffe0323e3cd37a13894e6359">NormalizeStreamTime</a>(<span class="keywordtype">double</span> absoluteTime) <span class="keyword">const</span>;
<a name="l00326"></a>00326 
<a name="l00327"></a>00327 <span class="comment">//   MIDI_PLAYBACK:</span>
<a name="l00328"></a>00328 <span class="comment">//   PmStream           *mMidiStream;</span>
<a name="l00329"></a>00329 <span class="comment">//   PmEvent             mMidiBuffer[MAX_MIDI_BUFFER_SIZE];</span>
<a name="l00330"></a>00330 <span class="comment">//   PmEvent             mMidiQueue[MAX_MIDI_BUFFER_SIZE];</span>
<a name="l00331"></a>00331 <span class="comment">//   PmError             mLastPmError;</span>
<a name="l00332"></a>00332 <span class="comment">//   long                mCurrentMidiTime;</span>
<a name="l00333"></a>00333 <span class="comment">//   long                mLastMidiTime;</span>
<a name="l00334"></a>00334 <span class="comment">//   Alg_seq             *mSeq;</span>
<a name="l00335"></a>00335 <span class="comment">//   int                 mVC;   // Visible Channel</span>
<a name="l00336"></a>00336 <span class="comment">//   int                 mCnt;</span>
<a name="l00337"></a>00337 <span class="comment">//   long                mMidiWait;</span>
<a name="l00338"></a>00338 <span class="comment">//   bool                mMidiStreamActive;</span>
<a name="l00339"></a>00339 <span class="comment">//   bool                mUpdateMidiTracks;</span>
<a name="l00340"></a>00340 
<a name="l00341"></a><a class="code" href="classAudioIO.html#be59a72ea00361a4ae9c027b7b86db55">00341</a>    <a class="code" href="classAudioThread.html" title="Defined different on Mac and other platforms (on Mac it does not use wxWidgets wxThread)...">AudioThread</a>        *<a class="code" href="classAudioIO.html#be59a72ea00361a4ae9c027b7b86db55">mThread</a>;
<a name="l00342"></a><a class="code" href="classAudioIO.html#d1e8c444ca5eb006c2c885b9e61fbb2a">00342</a>    <a class="code" href="classResample.html" title="Combined interface to libresample and libsamplerate.">Resample</a>          **<a class="code" href="classAudioIO.html#d1e8c444ca5eb006c2c885b9e61fbb2a">mResample</a>;
<a name="l00343"></a><a class="code" href="classAudioIO.html#9943bccca4dc39c7f8aeba2157920a96">00343</a>    <a class="code" href="classRingBuffer.html" title="Holds streamed audio samples.">RingBuffer</a>        **<a class="code" href="classAudioIO.html#9943bccca4dc39c7f8aeba2157920a96">mCaptureBuffers</a>;
<a name="l00344"></a><a class="code" href="classAudioIO.html#f0971d8057b3bbe1557c1682e5a6abb6">00344</a>    WaveTrackArray      <a class="code" href="classAudioIO.html#f0971d8057b3bbe1557c1682e5a6abb6">mCaptureTracks</a>;
<a name="l00345"></a><a class="code" href="classAudioIO.html#2fc9ce02752e7f102c7952005ac0dfbe">00345</a>    <a class="code" href="classRingBuffer.html" title="Holds streamed audio samples.">RingBuffer</a>        **<a class="code" href="classAudioIO.html#2fc9ce02752e7f102c7952005ac0dfbe">mPlaybackBuffers</a>;
<a name="l00346"></a><a class="code" href="classAudioIO.html#eb78aba80a54bfcff7024a8fa457c73a">00346</a>    WaveTrackArray      <a class="code" href="classAudioIO.html#eb78aba80a54bfcff7024a8fa457c73a">mPlaybackTracks</a>;
<a name="l00347"></a>00347 
<a name="l00348"></a>00348 <span class="comment">/* REQUIRES PORTMIDI */</span>
<a name="l00349"></a>00349 <span class="comment">//   NoteTrackArray      mMidiPlaybackTracks;</span>
<a name="l00350"></a>00350 <span class="comment">//   RingBuffer        **mMidiPlaybackBuffers;</span>
<a name="l00351"></a>00351 <span class="comment">//   NoteTrackArray      mMidiCaptureTracks;</span>
<a name="l00352"></a>00352 
<a name="l00353"></a><a class="code" href="classAudioIO.html#4cf441a40e28412dd800304fa748a39b">00353</a>    <a class="code" href="classMixer.html" title="Functions for doing the mixdown of the tracks.">Mixer</a>             **<a class="code" href="classAudioIO.html#4cf441a40e28412dd800304fa748a39b">mPlaybackMixers</a>;
<a name="l00354"></a><a class="code" href="classAudioIO.html#5afe23647a00239b06f3931eac411b02">00354</a>    <span class="keywordtype">int</span>                 <a class="code" href="classAudioIO.html#5afe23647a00239b06f3931eac411b02">mStreamToken</a>;
<a name="l00355"></a><a class="code" href="classAudioIO.html#38845eba480f9426556b8cd39b026515">00355</a>    <span class="keywordtype">int</span>                 <a class="code" href="classAudioIO.html#38845eba480f9426556b8cd39b026515">mStopStreamCount</a>;
<a name="l00356"></a><a class="code" href="classAudioIO.html#9ccf03b89e0cd5e6218550b4213a2401">00356</a>    <span class="keyword">static</span> <span class="keywordtype">int</span>          <a class="code" href="classAudioIO.html#9ccf03b89e0cd5e6218550b4213a2401">mNextStreamToken</a>;
<a name="l00357"></a><a class="code" href="classAudioIO.html#fb2cd8cfdaff11b52c3e6b91f5bfb395">00357</a>    <span class="keywordtype">double</span>              <a class="code" href="classAudioIO.html#fb2cd8cfdaff11b52c3e6b91f5bfb395">mFactor</a>;
<a name="l00358"></a><a class="code" href="classAudioIO.html#4c1d73ec8e53dc39f0552c69fbb58478">00358</a>    <span class="keywordtype">double</span>              <a class="code" href="classAudioIO.html#4c1d73ec8e53dc39f0552c69fbb58478">mRate</a>;
<a name="l00359"></a><a class="code" href="classAudioIO.html#45520c04e90d082ab2d1f9f1eab6fa92">00359</a>    <span class="keywordtype">double</span>              <a class="code" href="classAudioIO.html#45520c04e90d082ab2d1f9f1eab6fa92">mT</a>;
<a name="l00360"></a><a class="code" href="classAudioIO.html#e44e43a79e74f936873a1aa56f425d0d">00360</a>    <span class="keywordtype">double</span>              <a class="code" href="classAudioIO.html#e44e43a79e74f936873a1aa56f425d0d">mT0</a>;
<a name="l00361"></a><a class="code" href="classAudioIO.html#eaa6d968d53f7484758f2814cc39707b">00361</a>    <span class="keywordtype">double</span>              <a class="code" href="classAudioIO.html#eaa6d968d53f7484758f2814cc39707b">mT1</a>;
<a name="l00362"></a><a class="code" href="classAudioIO.html#df2d6f71c9cd21fd2064e38572714c99">00362</a>    <span class="keywordtype">double</span>              <a class="code" href="classAudioIO.html#df2d6f71c9cd21fd2064e38572714c99">mTime</a>;
<a name="l00363"></a><a class="code" href="classAudioIO.html#b0682a09425b8a119725f9db01b2d3d2">00363</a>    <span class="keywordtype">double</span>              <a class="code" href="classAudioIO.html#b0682a09425b8a119725f9db01b2d3d2">mWarpedT1</a>;
<a name="l00364"></a><a class="code" href="classAudioIO.html#ff6b26b419fcb778d39873cd70334463">00364</a>    <span class="keywordtype">double</span>              <a class="code" href="classAudioIO.html#ff6b26b419fcb778d39873cd70334463">mSeek</a>;
<a name="l00365"></a><a class="code" href="classAudioIO.html#6381cb51853d6c61f1c438d66abce61a">00365</a>    <span class="keywordtype">double</span>              <a class="code" href="classAudioIO.html#6381cb51853d6c61f1c438d66abce61a">mPlaybackRingBufferSecs</a>;
<a name="l00366"></a><a class="code" href="classAudioIO.html#be53e98a215869221222ad75d2d3ba4a">00366</a>    <span class="keywordtype">double</span>              <a class="code" href="classAudioIO.html#be53e98a215869221222ad75d2d3ba4a">mCaptureRingBufferSecs</a>;
<a name="l00367"></a><a class="code" href="classAudioIO.html#0412d78d824d14f9de1368578b517c92">00367</a>    <span class="keywordtype">double</span>              <a class="code" href="classAudioIO.html#0412d78d824d14f9de1368578b517c92">mMaxPlaybackSecsToCopy</a>;
<a name="l00368"></a><a class="code" href="classAudioIO.html#c0e4f8186f0c7fd2d2be77995f3d4a94">00368</a>    <span class="keywordtype">double</span>              <a class="code" href="classAudioIO.html#c0e4f8186f0c7fd2d2be77995f3d4a94">mMinCaptureSecsToCopy</a>;
<a name="l00369"></a><a class="code" href="classAudioIO.html#138fbc3be7e9440a23c38497347e26c5">00369</a>    <span class="keywordtype">bool</span>                <a class="code" href="classAudioIO.html#138fbc3be7e9440a23c38497347e26c5">mPaused</a>;
<a name="l00370"></a>00370 <span class="preprocessor">#if USE_PORTAUDIO_V19</span>
<a name="l00371"></a>00371 <span class="preprocessor"></span>   PaStream           *mPortStreamV19;
<a name="l00372"></a>00372 <span class="comment">/* REQUIRES PORTMIDI */</span>
<a name="l00373"></a>00373 <span class="comment">//   volatile bool       mInCallbackFinishedState;</span>
<a name="l00374"></a>00374 
<a name="l00375"></a><a class="code" href="classAudioIO.html#3ccb648d40ac555e6ca215d6c229e73d">00375</a> <span class="preprocessor">#else </span><span class="comment">/* USE_PORTAUDIO_V19 */</span>
<a name="l00376"></a><a class="code" href="classAudioIO.html#c0cc4f785cdff4279f5de09b27451f4f">00376</a>    PortAudioStream    *<a class="code" href="classAudioIO.html#3ccb648d40ac555e6ca215d6c229e73d">mPortStreamV18</a>;
<a name="l00377"></a>00377    <span class="keyword">volatile</span> <span class="keywordtype">bool</span>       <a class="code" href="classAudioIO.html#c0cc4f785cdff4279f5de09b27451f4f">mInCallbackFinishedState</a>;
<a name="l00378"></a><a class="code" href="classAudioIO.html#406d8e0362d4f43c34dd817710247d63">00378</a> <span class="preprocessor">#endif </span><span class="comment">/* USE_PORTAUDIO_V19 */</span>
<a name="l00379"></a><a class="code" href="classAudioIO.html#06462325e7e5409cb42f2c2675838aee">00379</a>    <span class="keywordtype">bool</span>                <a class="code" href="classAudioIO.html#406d8e0362d4f43c34dd817710247d63">mSoftwarePlaythrough</a>;
<a name="l00380"></a><a class="code" href="classAudioIO.html#c6361df44d71228f143778ecebebdb54">00380</a>    <span class="keywordtype">bool</span>                <a class="code" href="classAudioIO.html#06462325e7e5409cb42f2c2675838aee">mPauseRec</a>;
<a name="l00381"></a><a class="code" href="classAudioIO.html#d8431949843083dcc6f069eebdcc2278">00381</a>    <span class="keywordtype">float</span>               <a class="code" href="classAudioIO.html#c6361df44d71228f143778ecebebdb54">mSilenceLevel</a>;
<a name="l00382"></a><a class="code" href="classAudioIO.html#36c6f90a506763594c598f4e7af52723">00382</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        <a class="code" href="classAudioIO.html#d8431949843083dcc6f069eebdcc2278">mNumCaptureChannels</a>;
<a name="l00383"></a><a class="code" href="classAudioIO.html#3ced3771559e0231c0dc521d4770922d">00383</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        <a class="code" href="classAudioIO.html#36c6f90a506763594c598f4e7af52723">mNumPlaybackChannels</a>;
<a name="l00384"></a><a class="code" href="classAudioIO.html#000dad9d28f9d96130894f2a2e22e227">00384</a>    <a class="code" href="SampleFormat_8h.html#9938d2e2f6adef23e745cd80ef379792">sampleFormat</a>        <a class="code" href="classAudioIO.html#3ced3771559e0231c0dc521d4770922d">mCaptureFormat</a>;
<a name="l00385"></a><a class="code" href="classAudioIO.html#17c3501d96e68b6f79f354bc0b0205a9">00385</a>    <span class="keywordtype">float</span>              *<a class="code" href="classAudioIO.html#000dad9d28f9d96130894f2a2e22e227">mTempFloats</a>;
<a name="l00386"></a><a class="code" href="classAudioIO.html#c46dc8c642a3d340a0685e3cf69a8885">00386</a>    <span class="keywordtype">int</span>                 <a class="code" href="classAudioIO.html#17c3501d96e68b6f79f354bc0b0205a9">mLostSamples</a>;
<a name="l00387"></a><a class="code" href="classAudioIO.html#38da766dd2ae4aee4ec2121d3a97003d">00387</a>    <span class="keyword">volatile</span> <span class="keywordtype">bool</span>       <a class="code" href="classAudioIO.html#c46dc8c642a3d340a0685e3cf69a8885">mAudioThreadShouldCallFillBuffersOnce</a>;
<a name="l00388"></a><a class="code" href="classAudioIO.html#5b5caa76e3cd101bc3631bcbcd498f22">00388</a>    <span class="keyword">volatile</span> <span class="keywordtype">bool</span>       <a class="code" href="classAudioIO.html#38da766dd2ae4aee4ec2121d3a97003d">mAudioThreadFillBuffersLoopRunning</a>;
<a name="l00389"></a>00389    <span class="keyword">volatile</span> <span class="keywordtype">bool</span>       <a class="code" href="classAudioIO.html#5b5caa76e3cd101bc3631bcbcd498f22">mAudioThreadFillBuffersLoopActive</a>;
<a name="l00390"></a>00390 
<a name="l00391"></a>00391 <span class="comment">/* REQUIRES PORTMIDI */</span>
<a name="l00392"></a>00392 <span class="comment">//   volatile bool       mMidiThreadShouldCallFillBuffersOnce;</span>
<a name="l00393"></a>00393 <span class="comment">//   volatile bool       mMidiThreadFillBuffersLoopRunning;</span>
<a name="l00394"></a>00394 <span class="comment">//   volatile bool       mMidiThreadFillBuffersLoopActive;</span>
<a name="l00395"></a><a class="code" href="classAudioIO.html#880f41d8318c700e3d6bbad4aafa64b4">00395</a> 
<a name="l00396"></a><a class="code" href="classAudioIO.html#a029876175fac5537354387b6f8f0081">00396</a>    <span class="keyword">volatile</span> <span class="keywordtype">double</span>     <a class="code" href="classAudioIO.html#880f41d8318c700e3d6bbad4aafa64b4">mLastRecordingOffset</a>;
<a name="l00397"></a>00397    PaError             <a class="code" href="classAudioIO.html#a029876175fac5537354387b6f8f0081">mLastPaError</a>;
<a name="l00398"></a><a class="code" href="classAudioIO.html#460f5fb4800a06db7aba2f9682b2fb9f">00398</a> 
<a name="l00399"></a><a class="code" href="classAudioIO.html#b00f0faccf7e59dce5432e36c05f243a">00399</a>    <a class="code" href="classMeter.html" title="VU Meter, for displaying recording/playback level.">Meter</a>              *<a class="code" href="classAudioIO.html#460f5fb4800a06db7aba2f9682b2fb9f">mInputMeter</a>;
<a name="l00400"></a><a class="code" href="classAudioIO.html#755844de58787c4ebe165e3344595de9">00400</a>    <a class="code" href="classMeter.html" title="VU Meter, for displaying recording/playback level.">Meter</a>              *<a class="code" href="classAudioIO.html#b00f0faccf7e59dce5432e36c05f243a">mOutputMeter</a>;
<a name="l00401"></a><a class="code" href="classAudioIO.html#669282232e6710ba7b9985932012e85b">00401</a>    <span class="keywordtype">bool</span>                <a class="code" href="classAudioIO.html#755844de58787c4ebe165e3344595de9">mUpdateMeters</a>;
<a name="l00402"></a>00402    <span class="keywordtype">bool</span>                <a class="code" href="classAudioIO.html#669282232e6710ba7b9985932012e85b">mUpdatingMeters</a>;
<a name="l00403"></a>00403 
<a name="l00404"></a>00404 <span class="preprocessor">   #if USE_PORTMIXER</span>
<a name="l00405"></a>00405 <span class="preprocessor"></span>   PxMixer            *mPortMixer;
<a name="l00406"></a>00406    <span class="keywordtype">float</span>               mPreviousHWPlaythrough;
<a name="l00407"></a>00407 <span class="preprocessor">   #endif </span><span class="comment">/* USE_PORTMIXER */</span>
<a name="l00408"></a><a class="code" href="classAudioIO.html#48dbb8470710384234e15d0839cebcfa">00408</a> 
<a name="l00409"></a><a class="code" href="classAudioIO.html#b8a22b72ddd6fd85f0c97c62e5e21d4d">00409</a>    <span class="keywordtype">bool</span>                <a class="code" href="classAudioIO.html#48dbb8470710384234e15d0839cebcfa">mEmulateMixerOutputVol</a>;
<a name="l00410"></a><a class="code" href="classAudioIO.html#9027df822d0f1ebd27de7b36dbbc6e1e">00410</a>    <span class="keywordtype">bool</span>                <a class="code" href="classAudioIO.html#b8a22b72ddd6fd85f0c97c62e5e21d4d">mEmulateMixerInputVol</a>;
<a name="l00411"></a><a class="code" href="classAudioIO.html#7053f6db79c3388a2d40e2a2aa3eb165">00411</a>    <span class="keywordtype">float</span>               <a class="code" href="classAudioIO.html#9027df822d0f1ebd27de7b36dbbc6e1e">mMixerOutputVol</a>;
<a name="l00412"></a>00412    <span class="keywordtype">float</span>               <a class="code" href="classAudioIO.html#7053f6db79c3388a2d40e2a2aa3eb165">mMixerInputVol</a>;
<a name="l00413"></a><a class="code" href="classAudioIO.html#55d433b7ea62f9dac63eea89b90de186">00413</a> 
<a name="l00414"></a><a class="code" href="classAudioIO.html#592b2c6f26e92558bb3143a086cc267e">00414</a>    <span class="keywordtype">bool</span>                <a class="code" href="classAudioIO.html#55d433b7ea62f9dac63eea89b90de186">mPlayLooped</a>;
<a name="l00415"></a><a class="code" href="classAudioIO.html#cbaec684c745f9ada543bdcd80ea389d">00415</a>    <span class="keywordtype">double</span>              <a class="code" href="classAudioIO.html#592b2c6f26e92558bb3143a086cc267e">mCutPreviewGapStart</a>;
<a name="l00416"></a>00416    <span class="keywordtype">double</span>              <a class="code" href="classAudioIO.html#cbaec684c745f9ada543bdcd80ea389d">mCutPreviewGapLen</a>;
<a name="l00417"></a><a class="code" href="classAudioIO.html#5ea088c672f9438827a842fb45aa04f8">00417</a>    
<a name="l00418"></a>00418    <a class="code" href="classAudioIOListener.html">AudioIOListener</a>*    <a class="code" href="classAudioIO.html#5ea088c672f9438827a842fb45aa04f8">mListener</a>;
<a name="l00419"></a><a class="code" href="classAudioIO.html#894b7c943c91bb34f845aeb117786dff">00419</a> 
<a name="l00420"></a>00420    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classAudioThread.html" title="Defined different on Mac and other platforms (on Mac it does not use wxWidgets wxThread)...">AudioThread</a>;
<a name="l00421"></a>00421 
<a name="l00422"></a>00422    <span class="keyword">friend</span> <span class="keywordtype">void</span> <a class="code" href="classAudioIO.html#5c082d9ef3612f42a4a78edffdf2a0db">InitAudioIO</a>();
<a name="l00423"></a>00423    <span class="keyword">friend</span> <span class="keywordtype">void</span> <a class="code" href="classAudioIO.html#362633315924afe19ab0fe0cf4bd32da">DeinitAudioIO</a>();
<a name="l00424"></a><a class="code" href="classAudioIO.html#2242677985647e79554f7ce564dd196d">00424</a> 
<a name="l00425"></a>00425    <a class="code" href="classTimeTrack.html" title="A kind of Track used to &amp;#39;warp time&amp;#39;.">TimeTrack</a> *<a class="code" href="classAudioIO.html#2242677985647e79554f7ce564dd196d">mTimeTrack</a>;
<a name="l00426"></a>00426    
<a name="l00427"></a>00427 <span class="preprocessor">#if USE_PORTAUDIO_V19</span>
<a name="l00428"></a>00428 <span class="preprocessor"></span>   <span class="keyword">friend</span> <span class="keywordtype">int</span> <a class="code" href="classAudioIO.html#2b167655257a9fa86202d00bc34af80b">audacityAudioCallback</a>(
<a name="l00429"></a>00429                 <span class="keyword">const</span> <span class="keywordtype">void</span> *inputBuffer, <span class="keywordtype">void</span> *outputBuffer,
<a name="l00430"></a>00430                 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> framesPerBuffer,
<a name="l00431"></a>00431                 <span class="keyword">const</span> PaStreamCallbackTimeInfo *timeInfo,
<a name="l00432"></a>00432                 PaStreamCallbackFlags statusFlags, <span class="keywordtype">void</span> *userData );
<a name="l00433"></a>00433 <span class="preprocessor">#else </span><span class="comment">/* USE_PORTAUDIO_V19 */</span>
<a name="l00434"></a>00434    <span class="keyword">friend</span> <span class="keywordtype">int</span> <a class="code" href="classAudioIO.html#2b167655257a9fa86202d00bc34af80b">audacityAudioCallback</a>(
<a name="l00435"></a>00435                 <span class="keywordtype">void</span> *inputBuffer, <span class="keywordtype">void</span> *outputBuffer,
<a name="l00436"></a>00436                 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> framesPerBuffer,
<a name="l00437"></a>00437                 PaTimestamp outTime, <span class="keywordtype">void</span> *userData );
<a name="l00438"></a>00438 <span class="preprocessor">#endif </span><span class="comment">/* USE_PORTAUDIO_V19 */</span>
<a name="l00439"></a>00439 
<a name="l00440"></a>00440 };
<a name="l00441"></a>00441 
<a name="l00442"></a>00442 <span class="preprocessor">#endif</span>
<a name="l00443"></a>00443 <span class="preprocessor"></span>
<a name="l00444"></a>00444 <span class="comment">// Indentation settings for Vim and Emacs and unique identifier for Arch, a</span>
<a name="l00445"></a>00445 <span class="comment">// version control system. Please do not modify past this point.</span>
<a name="l00446"></a>00446 <span class="comment">//</span>
<a name="l00447"></a>00447 <span class="comment">// Local Variables:</span>
<a name="l00448"></a>00448 <span class="comment">// c-basic-offset: 3</span>
<a name="l00449"></a>00449 <span class="comment">// indent-tabs-mode: nil</span>
<a name="l00450"></a>00450 <span class="comment">// End:</span>
<a name="l00451"></a>00451 <span class="comment">//</span>
<a name="l00452"></a>00452 <span class="comment">// vim: et sts=3 sw=3</span>
<a name="l00453"></a>00453 <span class="comment">// arch-tag: 5b5316f5-6078-469b-950c-9da893cd62c9</span>
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Sat Oct 11 21:08:31 2008 for Audacity by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.4 </small></address>
</body>
</html>
