<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Audacity: Dither Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.4 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul>
</div>
<h1>Dither Class Reference</h1><!-- doxytag: class="Dither" --><code>#include &lt;<a class="el" href="Dither_8h-source.html">Dither.h</a>&gt;</code>
<p>

<p>
<a href="classDither-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
This class implements various functions for dithering and is derived from the dither code in the Ardour project, written by Steve Harris. 
<p>
Dithering is only done if it really is necessary. Otherwise (e.g. when the source and destination format of the samples is the same), the samples are only copied or converted. However, copied samples are always checked for out-of-bounds values and possibly clipped accordingly.<p>
These dither algorithms are currently implemented:<ul>
<li>No dithering at all</li><li>Rectangle dithering</li><li>Triangle dithering</li><li>Noise-shaped dithering</li></ul>
<p>
<a class="el" href="classDither.html" title="This class implements various functions for dithering and is derived from the dither...">Dither</a> class. You must construct an instance because it keeps state. Call <a class="el" href="classDither.html#b9d27fa93aa7d4d4a490b058c326717f">Dither::Apply()</a> to apply the dither. You can call <a class="el" href="classDither.html#39eb37b93d93a262e4beea29488e573a" title="Reset state of the dither.">Reset()</a> between subsequent dithers to reset the dither state and get deterministic behaviour. <table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDither.html#dea8077a2ba5a6c4ad2f11ed20cd4086">DitherType</a> { <a class="el" href="classDither.html#dea8077a2ba5a6c4ad2f11ed20cd4086b2f6eaa06d9f79958f282ba62ea96847">none</a> =  0, 
<a class="el" href="classDither.html#dea8077a2ba5a6c4ad2f11ed20cd4086d020f87518df3c744151879bf184fae9">rectangle</a> =  1, 
<a class="el" href="classDither.html#dea8077a2ba5a6c4ad2f11ed20cd4086821f5379115ed0e0bfebe7723e707b63">triangle</a> =  2, 
<a class="el" href="classDither.html#dea8077a2ba5a6c4ad2f11ed20cd4086607d818d7eea1ee97cfa38949cf9203b">shaped</a> =  3
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">These ditherers are currently available:.  <a href="classDither.html#dea8077a2ba5a6c4ad2f11ed20cd4086">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDither.html#3d229a9790aeaf00e63121495e2e0b48">Dither</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default constructor.  <a href="#3d229a9790aeaf00e63121495e2e0b48"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDither.html#39eb37b93d93a262e4beea29488e573a">Reset</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reset state of the dither.  <a href="#39eb37b93d93a262e4beea29488e573a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDither.html#b9d27fa93aa7d4d4a490b058c326717f">Apply</a> (<a class="el" href="classDither.html#dea8077a2ba5a6c4ad2f11ed20cd4086">DitherType</a> ditherType, const <a class="el" href="SampleFormat_8h.html#aafb46d1caf7c79262fec96b577215fe">samplePtr</a> source, <a class="el" href="SampleFormat_8h.html#9938d2e2f6adef23e745cd80ef379792">sampleFormat</a> sourceFormat, <a class="el" href="SampleFormat_8h.html#aafb46d1caf7c79262fec96b577215fe">samplePtr</a> dest, <a class="el" href="SampleFormat_8h.html#9938d2e2f6adef23e745cd80ef379792">sampleFormat</a> destFormat, unsigned int len, unsigned int stride=1)</td></tr>

<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDither.html#52b78d927e844af8b9cf4c4228c4a6e6">NoDither</a> (float sample)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDither.html#7b228c6fda63b9d65d6a69ef2cfcd97b">RectangleDither</a> (float sample)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDither.html#5729687b23beec510cbfeb43e383e07e">TriangleDither</a> (float sample)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDither.html#5f1f9038bb567c21728198bde562a15f">ShapedDither</a> (float sample)</td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDither.html#7d34147c8a3fa084642a9264639d3ef5">mPhase</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDither.html#19a6ec623f5635171c982f1cf6d73245">mTriangleState</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDither.html#76c19056657b8a85d68617d51bb319ab">mBuffer</a> [8]</td></tr>

<tr><td colspan="2"><br><h2>Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDither.html#e55b2d18cd57eb492456d6840a2b4bcb">BUF_SIZE</a> = 8</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDither.html#9010257a0922d13ce7345f3ee6a8fc5d">BUF_MASK</a> = 7</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static const float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDither.html#22d068379fe45e253029ed13ef91313b">SHAPED_BS</a> [] = { 2.033f, -2.165f, 1.959f, -1.590f, 0.6149f }</td></tr>

</table>
<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="dea8077a2ba5a6c4ad2f11ed20cd4086"></a><!-- doxytag: member="Dither::DitherType" ref="dea8077a2ba5a6c4ad2f11ed20cd4086" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classDither.html#dea8077a2ba5a6c4ad2f11ed20cd4086">Dither::DitherType</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
These ditherers are currently available:. 
<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="dea8077a2ba5a6c4ad2f11ed20cd4086b2f6eaa06d9f79958f282ba62ea96847"></a><!-- doxytag: member="none" ref="dea8077a2ba5a6c4ad2f11ed20cd4086b2f6eaa06d9f79958f282ba62ea96847" args="" -->none</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="dea8077a2ba5a6c4ad2f11ed20cd4086d020f87518df3c744151879bf184fae9"></a><!-- doxytag: member="rectangle" ref="dea8077a2ba5a6c4ad2f11ed20cd4086d020f87518df3c744151879bf184fae9" args="" -->rectangle</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="dea8077a2ba5a6c4ad2f11ed20cd4086821f5379115ed0e0bfebe7723e707b63"></a><!-- doxytag: member="triangle" ref="dea8077a2ba5a6c4ad2f11ed20cd4086821f5379115ed0e0bfebe7723e707b63" args="" -->triangle</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="dea8077a2ba5a6c4ad2f11ed20cd4086607d818d7eea1ee97cfa38949cf9203b"></a><!-- doxytag: member="shaped" ref="dea8077a2ba5a6c4ad2f11ed20cd4086607d818d7eea1ee97cfa38949cf9203b" args="" -->shaped</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

</div>
</div><p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="3d229a9790aeaf00e63121495e2e0b48"></a><!-- doxytag: member="Dither::Dither" ref="3d229a9790aeaf00e63121495e2e0b48" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Dither::Dither           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Default constructor. 
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="39eb37b93d93a262e4beea29488e573a"></a><!-- doxytag: member="Dither::Reset" ref="39eb37b93d93a262e4beea29488e573a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Dither::Reset           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reset state of the dither. 
<p>

</div>
</div><p>
<a class="anchor" name="b9d27fa93aa7d4d4a490b058c326717f"></a><!-- doxytag: member="Dither::Apply" ref="b9d27fa93aa7d4d4a490b058c326717f" args="(DitherType ditherType, const samplePtr source, sampleFormat sourceFormat, samplePtr dest, sampleFormat destFormat, unsigned int len, unsigned int stride=1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Dither::Apply           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDither.html#dea8077a2ba5a6c4ad2f11ed20cd4086">DitherType</a>&nbsp;</td>
          <td class="paramname"> <em>ditherType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="SampleFormat_8h.html#aafb46d1caf7c79262fec96b577215fe">samplePtr</a>&nbsp;</td>
          <td class="paramname"> <em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="SampleFormat_8h.html#9938d2e2f6adef23e745cd80ef379792">sampleFormat</a>&nbsp;</td>
          <td class="paramname"> <em>sourceFormat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="SampleFormat_8h.html#aafb46d1caf7c79262fec96b577215fe">samplePtr</a>&nbsp;</td>
          <td class="paramname"> <em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="SampleFormat_8h.html#9938d2e2f6adef23e745cd80ef379792">sampleFormat</a>&nbsp;</td>
          <td class="paramname"> <em>destFormat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>stride</em> = <code>1</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Apply the actual dithering. Expects the source sample in the 'source' variable, the destination sample in the 'dest' variable, and hints to the formats of the samples. Even if the sample formats are the same, samples are clipped, if necessary. 
</div>
</div><p>
<a class="anchor" name="52b78d927e844af8b9cf4c4228c4a6e6"></a><!-- doxytag: member="Dither::NoDither" ref="52b78d927e844af8b9cf4c4228c4a6e6" args="(float sample)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float Dither::NoDither           </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>sample</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="7b228c6fda63b9d65d6a69ef2cfcd97b"></a><!-- doxytag: member="Dither::RectangleDither" ref="7b228c6fda63b9d65d6a69ef2cfcd97b" args="(float sample)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float Dither::RectangleDither           </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>sample</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="5729687b23beec510cbfeb43e383e07e"></a><!-- doxytag: member="Dither::TriangleDither" ref="5729687b23beec510cbfeb43e383e07e" args="(float sample)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float Dither::TriangleDither           </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>sample</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="5f1f9038bb567c21728198bde562a15f"></a><!-- doxytag: member="Dither::ShapedDither" ref="5f1f9038bb567c21728198bde562a15f" args="(float sample)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float Dither::ShapedDither           </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>sample</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="e55b2d18cd57eb492456d6840a2b4bcb"></a><!-- doxytag: member="Dither::BUF_SIZE" ref="e55b2d18cd57eb492456d6840a2b4bcb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="classDither.html#e55b2d18cd57eb492456d6840a2b4bcb">Dither::BUF_SIZE</a> = 8<code> [static, private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="9010257a0922d13ce7345f3ee6a8fc5d"></a><!-- doxytag: member="Dither::BUF_MASK" ref="9010257a0922d13ce7345f3ee6a8fc5d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="classDither.html#9010257a0922d13ce7345f3ee6a8fc5d">Dither::BUF_MASK</a> = 7<code> [static, private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="22d068379fe45e253029ed13ef91313b"></a><!-- doxytag: member="Dither::SHAPED_BS" ref="22d068379fe45e253029ed13ef91313b" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const float <a class="el" href="classDither.html#22d068379fe45e253029ed13ef91313b">Dither::SHAPED_BS</a> = { 2.033f, -2.165f, 1.959f, -1.590f, 0.6149f }<code> [static, private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="7d34147c8a3fa084642a9264639d3ef5"></a><!-- doxytag: member="Dither::mPhase" ref="7d34147c8a3fa084642a9264639d3ef5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classDither.html#7d34147c8a3fa084642a9264639d3ef5">Dither::mPhase</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="19a6ec623f5635171c982f1cf6d73245"></a><!-- doxytag: member="Dither::mTriangleState" ref="19a6ec623f5635171c982f1cf6d73245" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="classDither.html#19a6ec623f5635171c982f1cf6d73245">Dither::mTriangleState</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="76c19056657b8a85d68617d51bb319ab"></a><!-- doxytag: member="Dither::mBuffer" ref="76c19056657b8a85d68617d51bb319ab" args="[8]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="classDither.html#76c19056657b8a85d68617d51bb319ab">Dither::mBuffer</a>[8]<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="Dither_8h-source.html">Dither.h</a><li><a class="el" href="Dither_8cpp.html">Dither.cpp</a></ul>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat Oct 11 21:08:38 2008 for Audacity by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.4 </small></address>
</body>
</html>
