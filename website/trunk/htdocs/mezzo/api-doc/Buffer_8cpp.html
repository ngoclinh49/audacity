<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Mezzo: Buffer.cpp File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>Buffer.cpp File Reference</h1><code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;math.h&gt;</code><br>
<code>#include &lt;posh/posh.h&gt;</code><br>
<code>#include "<a class="el" href="Cubic_8h-source.html">Cubic.h</a>"</code><br>
<code>#include "<a class="el" href="Buffer_8h-source.html">Buffer.h</a>"</code><br>
<code>#include "<a class="el" href="Exceptions_8h-source.html">Exceptions.h</a>"</code><br>
<code>#include "<a class="el" href="Util_8h-source.html">Util.h</a>"</code><br>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Namespaces</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>namespace &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="namespaceMezzo.html">Mezzo</a></td></tr>

<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="Buffer_8cpp.html#a0">CONSTRUCT_WITH_INITIAL_VALUES</a>(CLASSNAME, TYPENAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="Buffer_8cpp.html#a1">CONSTRUCT_WITH_EXISTING_DATA</a>(CLASSNAME, TYPENAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="Buffer_8cpp.html#a2">CONSTRUCT_APPEND</a>(CLASSNAME, TYPENAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="Buffer_8cpp.html#a3">CONSTRUCT_APPEND</a>(CLASSNAME, TYPENAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="Buffer_8cpp.html#a4">NEWBUFFERSAMETYPE</a>(CLASSNAME, TYPENAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="Buffer_8cpp.html#a5">DESTRUCTOR</a>(CLASSNAME, TYPENAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="Buffer_8cpp.html#a6">BUFFER_GET</a>(CLASSNAME, TYPENAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="Buffer_8cpp.html#a7">BUFFER_GET_NO_LEN</a>(CLASSNAME, TYPENAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="Buffer_8cpp.html#a8">BUFFER_GET_RAW</a>(CLASSNAME, TYPENAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="Buffer_8cpp.html#a9">BUFFER_SET</a>(CLASSNAME, TYPENAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="Buffer_8cpp.html#a10">BUFFER_SUBSET</a>(CLASSNAME, TYPENAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="Buffer_8cpp.html#a11">BUFFER_SUBSET_NO_LEN</a>(CLASSNAME, TYPENAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="Buffer_8cpp.html#a12">BUFFER_SUBSET</a>(CLASSNAME, TYPENAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="Buffer_8cpp.html#a13">BUFFER_OPERATOR_PLUS_EQUALS</a>(CLASSNAME, TYPENAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="Buffer_8cpp.html#a14">BUFFER_OPERATOR_ARRAY</a>(CLASSNAME, TYPENAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="Buffer_8cpp.html#a15">BUFFER_OPERATOR_ARRAY_WRITE</a>(CLASSNAME, TYPENAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="Buffer_8cpp.html#a16">BUFFER_GET_MIN</a>(CLASSNAME, TYPENAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="Buffer_8cpp.html#a17">BUFFER_GET_MAX</a>(CLASSNAME, TYPENAME)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="Buffer_8cpp.html#a18">BUFFER_GET_ABS_MAX</a>(CLASSNAME, TYPENAME, ABSFUNC)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a6" doxytag="Buffer.cpp::BUFFER_GET" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUFFER_GET</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CLASSNAME,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>TYPENAME&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre><span class="keywordtype">void</span> CLASSNAME ## Buffer::Get(TYPENAME *buffer, <span class="keywordtype">int</span> start,                  \
                              <span class="keywordtype">int</span> len, <span class="keywordtype">int</span> stride) <span class="keyword">const</span>                    \
{                                                                           \
   <a class="code" href="Exceptions_8h.html#a1">ClientAssert</a>(start&gt;=0 &amp;&amp; len&gt;=0 &amp;&amp; start&lt;=mData-&gt;len &amp;&amp; stride&gt;0 &amp;&amp;      \
                start+stride*(len-1)&lt;=mData-&gt;len,                           \
                <a class="code" href="Util_8cpp.html#a0">fmt</a>(<span class="stringliteral">"Attempt to Get from a Buffer with "</span>                    \
                    <span class="stringliteral">"start=%d ,len=%d, stride=%d, when Buffer len is %d"</span>,   \
                    start, len, stride, mData-&gt;len));                       \
                                                                            \
   <span class="keywordtype">int</span> i;                                                                   \
   <span class="keywordtype">int</span> j = start;                                                           \
   <span class="keywordflow">for</span>(i=0; i&lt;len; i++) {                                                   \
      buffer[i] = mData-&gt;CLASSNAME ## Data[j];                              \
      j += stride;                                                          \
   }                                                                        \
}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="Buffer.cpp::BUFFER_GET_ABS_MAX" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUFFER_GET_ABS_MAX</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CLASSNAME,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>TYPENAME,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>ABSFUNC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre>TYPENAME CLASSNAME ## Buffer::GetAbsMax() <span class="keyword">const</span>                           \
{                                                                         \
   <span class="keywordflow">if</span> (mData-&gt;len &lt;= 0)                                                   \
      <span class="keywordflow">return</span> (TYPENAME)0;                                                 \
                                                                          \
   <span class="keywordtype">int</span> i;                                                                 \
   TYPENAME max = ABSFUNC(mData-&gt;CLASSNAME ## Data[0]);                   \
   <span class="keywordflow">for</span>(i=1; i&lt;mData-&gt;len; i++)                                            \
      <span class="keywordflow">if</span> (fabs(mData-&gt;CLASSNAME ## Data[i]) &gt; max)                        \
         max = (TYPENAME)ABSFUNC((TYPENAME) mData-&gt;CLASSNAME ## Data[i]); \
   <span class="keywordflow">return</span> max;                                                            \
}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="Buffer.cpp::BUFFER_GET_MAX" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUFFER_GET_MAX</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CLASSNAME,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>TYPENAME&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre>TYPENAME CLASSNAME ## Buffer::GetMax() <span class="keyword">const</span>                               \
{                                                                          \
   <span class="keywordflow">if</span> (mData-&gt;len &lt;= 0)                                                    \
      <span class="keywordflow">return</span> (TYPENAME)0;                                                  \
                                                                           \
   <span class="keywordtype">int</span> i;                                                                  \
   TYPENAME max = mData-&gt;CLASSNAME ## Data[0];                             \
   <span class="keywordflow">for</span>(i=1; i&lt;mData-&gt;len; i++)                                             \
      <span class="keywordflow">if</span> (mData-&gt;CLASSNAME ## Data[i] &gt; max)                               \
         max = mData-&gt;CLASSNAME ## Data[i];                                \
   <span class="keywordflow">return</span> max;                                                             \
}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="Buffer.cpp::BUFFER_GET_MIN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUFFER_GET_MIN</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CLASSNAME,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>TYPENAME&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre>TYPENAME CLASSNAME ## Buffer::GetMin() <span class="keyword">const</span>                               \
{                                                                          \
   <span class="keywordflow">if</span> (mData-&gt;len &lt;= 0)                                                    \
      <span class="keywordflow">return</span> (TYPENAME)0;                                                  \
                                                                           \
   <span class="keywordtype">int</span> i;                                                                  \
   TYPENAME min = mData-&gt;CLASSNAME ## Data[0];                             \
   <span class="keywordflow">for</span>(i=1; i&lt;mData-&gt;len; i++)                                             \
      <span class="keywordflow">if</span> (mData-&gt;CLASSNAME ## Data[i] &lt; min)                               \
         min = mData-&gt;CLASSNAME ## Data[i];                                \
   <span class="keywordflow">return</span> min;                                                             \
}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="Buffer.cpp::BUFFER_GET_NO_LEN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUFFER_GET_NO_LEN</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CLASSNAME,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>TYPENAME&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre><span class="keywordtype">void</span> CLASSNAME ## Buffer::Get(TYPENAME *buffer, <span class="keywordtype">int</span> start) <span class="keyword">const</span>            \
{                                                                           \
   <a class="code" href="Exceptions_8h.html#a1">ClientAssert</a>(start&gt;=0 &amp;&amp; start&lt;=mData-&gt;len,                              \
                <a class="code" href="Util_8cpp.html#a0">fmt</a>(<span class="stringliteral">"Attempt to Get from a Buffer with "</span>                    \
                    <span class="stringliteral">"start=%d when Buffer len is %d"</span>,                       \
                    mData-&gt;len));                                           \
                                                                            \
   Get(buffer, start, mData-&gt;len - start);                                  \
}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="Buffer.cpp::BUFFER_GET_RAW" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUFFER_GET_RAW</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CLASSNAME,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>TYPENAME&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre>TYPENAME * CLASSNAME ## Buffer::GetPtr(<span class="keywordtype">int</span> start <span class="comment">/* = 0 */</span>) <span class="keyword">const</span>           \
{                                                                           \
   <span class="keywordflow">return</span> mData-&gt;CLASSNAME ## Data + start;                                 \
}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="Buffer.cpp::BUFFER_OPERATOR_ARRAY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUFFER_OPERATOR_ARRAY</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CLASSNAME,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>TYPENAME&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre>TYPENAME CLASSNAME ## Buffer::operator[](<span class="keywordtype">int</span> index) <span class="keyword">const</span>                  \
{                                                                          \
   <a class="code" href="Exceptions_8h.html#a1">ClientAssert</a>(index&gt;=0 &amp;&amp; index&lt;mData-&gt;len,                              \
                <a class="code" href="Util_8cpp.html#a0">fmt</a>(<span class="stringliteral">"Attempt to access Buffer[%d] when Buffer len is %d"</span>,  \
                    index, mData-&gt;len));                                   \
                                                                           \
   <span class="keywordflow">return</span> mData-&gt;CLASSNAME ## Data[index];                                 \
}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="Buffer.cpp::BUFFER_OPERATOR_ARRAY_WRITE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUFFER_OPERATOR_ARRAY_WRITE</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CLASSNAME,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>TYPENAME&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre>TYPENAME&amp; CLASSNAME ## Buffer::operator[](<span class="keywordtype">int</span> index)                       \
{                                                                          \
   <a class="code" href="Exceptions_8h.html#a1">ClientAssert</a>(index&gt;=0 &amp;&amp; index&lt;mData-&gt;len,                              \
                <a class="code" href="Util_8cpp.html#a0">fmt</a>(<span class="stringliteral">"Attempt to access &amp;Buffer[%d] when Buffer len is %d"</span>, \
                    index, mData-&gt;len));                                   \
   CopyOnWrite();                                                          \
                                                                           \
   <span class="keywordflow">return</span> mData-&gt;CLASSNAME ## Data[index];                                 \
}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="Buffer.cpp::BUFFER_OPERATOR_PLUS_EQUALS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUFFER_OPERATOR_PLUS_EQUALS</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CLASSNAME,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>TYPENAME&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre><span class="keywordtype">void</span> CLASSNAME ## Buffer::operator+=(TYPENAME offset)                      \
{                                                                          \
   CopyOnWrite();                                                          \
                                                                           \
   <span class="keywordtype">int</span> i;                                                                  \
   <span class="keywordflow">for</span>(i=0; i&lt;mData-&gt;len; i++)                                             \
      mData-&gt;CLASSNAME ## Data[i] += offset;                               \
}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="Buffer.cpp::BUFFER_SET" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUFFER_SET</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CLASSNAME,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>TYPENAME&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre><span class="keywordtype">void</span> CLASSNAME ## Buffer::Set(TYPENAME *buffer, <span class="keywordtype">int</span> start,                  \
                              <span class="keywordtype">int</span> len, <span class="keywordtype">int</span> stride)                          \
{                                                                           \
   <a class="code" href="Exceptions_8h.html#a1">ClientAssert</a>(start&gt;=0 &amp;&amp; len&gt;=0 &amp;&amp; start&lt;=mData-&gt;len &amp;&amp; stride&gt;0 &amp;&amp;      \
                start+stride*(len-1)&lt;=mData-&gt;len,                           \
                <a class="code" href="Util_8cpp.html#a0">fmt</a>(<span class="stringliteral">"Attempt to Set in a Buffer with "</span>                      \
                    <span class="stringliteral">"start=%d ,len=%d, stride=%d, when Buffer len is %d"</span>,   \
                    start, len, stride, mData-&gt;len));                       \
   CopyOnWrite();                                                           \
                                                                            \
   <span class="keywordtype">int</span> i;                                                                   \
   <span class="keywordtype">int</span> j = start;                                                           \
   <span class="keywordflow">for</span>(i=0; i&lt;len; i++) {                                                   \
      mData-&gt;CLASSNAME ## Data[j] = buffer[i];                              \
      j += stride;                                                          \
   }                                                                        \
}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="Buffer.cpp::BUFFER_SUBSET" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUFFER_SUBSET</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CLASSNAME,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>TYPENAME&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre><span class="keywordtype">void</span> CLASSNAME ## Buffer::Set(<span class="keywordtype">int</span> start, CLASSNAME ## Buffer buffer)       \
{                                                                          \
   CopyOnWrite();                                                          \
   buffer.Get(&amp;mData-&gt;CLASSNAME ## Data[start], 0, buffer.mData-&gt;len, 1);  \
}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="Buffer.cpp::BUFFER_SUBSET" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUFFER_SUBSET</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CLASSNAME,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>TYPENAME&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre>CLASSNAME ## Buffer CLASSNAME ## Buffer::Get(<span class="keywordtype">int</span> start, <span class="keywordtype">int</span> len,           \
                                             <span class="keywordtype">int</span> stride) <span class="keyword">const</span>             \
{                                                                          \
   <span class="keywordflow">return</span> CLASSNAME ## Buffer(mData-&gt;CLASSNAME ## Data, start, len,        \
                              stride, MakeCopy);                           \
}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="Buffer.cpp::BUFFER_SUBSET_NO_LEN" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define BUFFER_SUBSET_NO_LEN</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CLASSNAME,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>TYPENAME&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre>CLASSNAME ## Buffer CLASSNAME ## Buffer::Get(<span class="keywordtype">int</span> start) <span class="keyword">const</span>              \
{                                                                          \
   <span class="keywordflow">return</span> CLASSNAME ## Buffer(mData-&gt;CLASSNAME ## Data, start,             \
                              mData-&gt;len - start, MakeCopy);               \
}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="Buffer.cpp::CONSTRUCT_APPEND" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CONSTRUCT_APPEND</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CLASSNAME,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>TYPENAME&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre>CLASSNAME ## Buffer::CLASSNAME ## Buffer(<span class="keyword">const</span> CLASSNAME ## Buffer&amp;left, \
                                         <span class="keyword">const</span> CLASSNAME ## Buffer&amp;mid,  \
                                         <span class="keyword">const</span> CLASSNAME ## Buffer&amp;right)\
{                                                                        \
   <span class="keywordtype">int</span> leftLen = left.GetLength();                                       \
   <span class="keywordtype">int</span> midLen = mid.GetLength();                                         \
   <span class="keywordtype">int</span> rStart = leftLen + midLen;                                        \
   <span class="keywordtype">int</span> rightLen = right.GetLength();                                     \
   mData = <span class="keyword">new</span> BufferData;                                               \
   mData-&gt;disposalMethod = DisposeWithDelete;                            \
   mData-&gt;len = leftLen + midLen + rightLen;                             \
   mData-&gt;refCount = 1;                                                  \
   mData-&gt;sampleFormat = CLASSNAME ## Sample;                 \
   mData-&gt;CLASSNAME ## Data = <span class="keyword">new</span> TYPENAME[mData-&gt;len];                  \
   left.As ## CLASSNAME().Get(mData-&gt;CLASSNAME ## Data,           \
                                     0, leftLen);                        \
   mid.As ## CLASSNAME().Get(&amp;mData-&gt;CLASSNAME ## Data[leftLen],  \
                                     0, midLen);                         \
   right.As ## CLASSNAME().Get(&amp;mData-&gt;CLASSNAME ## Data[rStart], \
                                     0, rightLen);                       \
}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="Buffer.cpp::CONSTRUCT_APPEND" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CONSTRUCT_APPEND</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CLASSNAME,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>TYPENAME&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre>CLASSNAME ## Buffer::CLASSNAME ## Buffer(<span class="keyword">const</span> CLASSNAME ## Buffer&amp;left, \
                                         <span class="keyword">const</span> CLASSNAME ## Buffer&amp;right)\
{                                                                        \
   <span class="keywordtype">int</span> leftLen = left.GetLength();                                       \
   <span class="keywordtype">int</span> rightLen = right.GetLength();                                     \
   mData = <span class="keyword">new</span> BufferData;                                               \
   mData-&gt;disposalMethod = DisposeWithDelete;                            \
   mData-&gt;len = leftLen + rightLen;                                      \
   mData-&gt;refCount = 1;                                                  \
   mData-&gt;sampleFormat = CLASSNAME ## Sample;                 \
   mData-&gt;CLASSNAME ## Data = <span class="keyword">new</span> TYPENAME[mData-&gt;len];                  \
   left.As ## CLASSNAME().Get(mData-&gt;CLASSNAME ## Data,           \
                                     0, leftLen);                        \
   right.As ## CLASSNAME().Get(&amp;mData-&gt;CLASSNAME ## Data[leftLen],\
                                     0, rightLen);                       \
}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="Buffer.cpp::CONSTRUCT_WITH_EXISTING_DATA" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CONSTRUCT_WITH_EXISTING_DATA</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CLASSNAME,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>TYPENAME&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre>CLASSNAME ## Buffer::CLASSNAME ## Buffer(TYPENAME *buffer, <span class="keywordtype">int</span> start,     \
                                         <span class="keywordtype">int</span> len, <span class="keywordtype">int</span> stride,             \
                                         disposalMethod method)           \
{                                                                         \
   mData = <span class="keyword">new</span> BufferData;                                                \
   mData-&gt;disposalMethod = method;                                        \
   mData-&gt;len = len;                                                      \
   mData-&gt;refCount = 1;                                                   \
   mData-&gt;sampleFormat = CLASSNAME ## Sample;                              \
   <span class="keywordflow">if</span> (method == MakeCopy) {                                              \
      mData-&gt;CLASSNAME ## Data = <span class="keyword">new</span> TYPENAME[len];                       \
      mData-&gt;disposalMethod = DisposeWithDelete;                          \
                                                                          \
      <span class="keywordflow">if</span>(stride == 1)                                                     \
         memcpy(mData-&gt;CLASSNAME ## Data,                                 \
                buffer + start,                                           \
                len*<span class="keyword">sizeof</span>(TYPENAME));                                    \
      <span class="keywordflow">else</span>                                                                \
         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; len; i++)                                     \
            mData-&gt;CLASSNAME ## Data[i] = buffer[start+i*stride];         \
   }                                                                      \
   <span class="keywordflow">else</span>                                                                   \
      mData-&gt;CLASSNAME ## Data = buffer + start;                          \
}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="Buffer.cpp::CONSTRUCT_WITH_INITIAL_VALUES" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CONSTRUCT_WITH_INITIAL_VALUES</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CLASSNAME,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>TYPENAME&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre>CLASSNAME ## Buffer::CLASSNAME ## Buffer(<span class="keywordtype">int</span> len, TYPENAME initialValues) \
{                                                                         \
   mData = <span class="keyword">new</span> BufferData;                                                \
   mData-&gt;CLASSNAME ## Data = <span class="keyword">new</span> TYPENAME[len];                          \
   mData-&gt;sampleFormat = CLASSNAME ## Sample;                  \
   mData-&gt;len = len;                                                      \
   mData-&gt;refCount = 1;                                                   \
   mData-&gt;disposalMethod = DisposeWithDelete;                             \
                                                                          \
   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; len; i++)                                           \
      mData-&gt;CLASSNAME ## Data[i] = initialValues;                        \
}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="Buffer.cpp::DESTRUCTOR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define DESTRUCTOR</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CLASSNAME,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>TYPENAME&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre>CLASSNAME ## Buffer::~CLASSNAME ## Buffer()                          \
{                                                                    \
   Detach();                                                         \
}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="Buffer.cpp::NEWBUFFERSAMETYPE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NEWBUFFERSAMETYPE</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CLASSNAME,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>TYPENAME&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre>Buffer CLASSNAME ## Buffer::NewBufferWithSameType(<span class="keywordtype">int</span> len)            \
{                                                                     \
   <span class="keywordflow">return</span> CLASSNAME ## Buffer(len);                                   \
}
</pre></div>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Fri May 19 20:42:23 2006 for Mezzo by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
